(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(15),o=t.n(a),u=(t(20),t(3)),i=t(4),s=t.n(i),d="/api/persons",l=function(){return s.a.get(d).then((function(e){return e.data}))},b=function(e){return s.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},j=t(0),m=function(e){var n=e.searchFilter,t=e.handleSearchFilterChange;return Object(j.jsxs)("div",{children:["filter shown with",Object(j.jsx)("input",{value:n,onChange:t})]})},O=t(6),p=function(e){var n=function(n,t){var r={name:n,number:t};e.addPerson(r)};return Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault();var r=!1,c=!1;if(e.persons.some((function(n){return n.name===e.newName}))&&(r=!0,c=window.confirm("".concat(e.newName," is already added to phonebook, replace the old number with a new one?"))),c){var a=e.persons.find((function(n){return n.name===e.newName})),o=Object(O.a)(Object(O.a)({},a),{},{number:e.newNumber});e.updatePerson(o)}r||(n(e.newName,e.newNumber),e.setNewName(""),e.setNewNumber(""))},children:[Object(j.jsxs)("div",{children:["name:",Object(j.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(j.jsxs)("div",{children:["number:",Object(j.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.persons,t=e.searchFilter,r=e.deletePerson,c=function(e){var n=e.person,t=e.confirmDeletion;return Object(j.jsxs)("div",{children:[n.name," ",n.number,Object(j.jsx)("button",{onClick:t,children:"delete"})]})};return n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(j.jsx)(c,{person:e,confirmDeletion:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&r(e)}(e)}},e.id)}))},g=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),o=Object(u.a)(a,2),i=o[0],s=o[1],d=Object(r.useState)(""),O=Object(u.a)(d,2),g=O[0],w=O[1],x=Object(r.useState)(""),N=Object(u.a)(x,2),C=N[0],S=N[1],F=Object(r.useState)(null),P=Object(u.a)(F,2),y=P[0],k=P[1],D=Object(r.useState)(!1),B=Object(u.a)(D,2),I=B[0],L=B[1];Object(r.useEffect)((function(){l().then((function(e){c(e)}))}),[]);var T=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{style:E,children:n})},E={color:I?"red":"green",background:"lightgrey",fontStyle:"italic",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},J=function(e,n){L(n),k(e),setTimeout((function(){k(null)}),5e3)};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(T,{message:y}),Object(j.jsx)(m,{searchFilter:i,handleSearchFilterChange:function(e){s(e.target.value)}}),Object(j.jsx)("h3",{children:"add a new"}),Object(j.jsx)(p,{persons:t,setPersons:c,setNewName:w,setNewNumber:S,newName:g,handleNameChange:function(e){w(e.target.value)},newNumber:C,handleNumberChange:function(e){S(e.target.value)},addPerson:function(e){b(e).then((function(e){c(t.concat(e)),J("Added ".concat(e.name))})).catch((function(e){J(e.response.data.error,!0)}))},updatePerson:function(e){h(e.id,e).then((function(n){c(t.map((function(t){return t.id!==e.id?t:n}))),J("Updated number ".concat(n.number," to ").concat(n.name))})).catch((function(e){J(e.response.data.error,!0)}))}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(v,{persons:t,searchFilter:i,deletePerson:function(e){f(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),J("Deleted ".concat(e.name))})).catch((function(){J("Information of ".concat(e.name," has already been removed from the server"),!0)}))}})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root")),w()}},[[40,1,2]]]);
//# sourceMappingURL=main.7e2f932c.chunk.js.map